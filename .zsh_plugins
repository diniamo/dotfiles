update-hook() {
	if [[ $1 = "omz update"* ]]; then
		echo Updating plugins
		for plugin in $CUSTOM_PLUGINS; do
			split=("${(@s|/|)plugin}")
			git -C "$ZSH/custom/plugins/$split[2]" pull
		done
	fi
}
autoload -U add-zsh-hook
add-zsh-hook preexec update-hook

collect-garbage() {
	
}

for plugin in $custom_plugins; do
	pre_split=("${(s|/|)plugin}")
	split=("${(s|:|)pre_split[2]}")
	split=($pre_split[1] $split)

	if [ ! -d "$ZSH/custom/plugins/$split[-1]" ]; then
		git clone "https://github.com/$split[1]/$split[2].git" "$ZSH/custom/plugins/$split[-1]"
	fi

	plugins=($plugins $split[-1])
done
